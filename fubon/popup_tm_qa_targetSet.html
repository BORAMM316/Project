<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

<!-- css -->
<link rel="stylesheet" href="resources/css/jquery.treeSelector.css">
<link rel="stylesheet" href="resources/css/common.css">
<link rel="stylesheet" href="resources/css/popup.css">
<link rel="stylesheet" href="resources/css/popup.css">

<!-- js -->
<script src="resources/js/jquery-3.3.1.min.js"></script>
<script src="resources/js/jquery-migrate-3.3.0.min.js"></script>
<script src="resources/js/jquery.treeSelector.js"></script>

<title>TM QA 대상 지정 || 푸본현대생명</title>
</head>
<body>
<!-- #wrap -->
<div id="wrap">
    <!-- #container -->
    <div id="container">
        <!-- #contents -->
        <div class="popup_wrap">
            <h1>QA 대상 지정</h1>

            <!-- .target_setArea -->
            <div class="target_setArea">
                <!-- [D] QA 대상 지정의 총 건수는 저장된 이후에 반영되어야함 -->
                <h2>
                    <p>
                        QA 대상 지정
                        <span>총 <em class="qa_total_case"></em>건</span>
                    </p>
                </h2>

                <div class="fl">
                    <dl class="set_condition">
                        <dt>
                            <span>TMR 지정</span>
                            <div class="iptBox">
                                <input type="text" numberOnly>
                                <em>건</em>
                            </div>
                        </dt>

                        <dd>
                            <div id="treeSelector"></div>
                        </dd>
                    </dl>

                    <dl class="set_condition">
                        <dt>
                            <span>TA 점수</span>
                            <div class="iptBox">
                                <input type="text" numberOnly>
                                <em>건</em>
                            </div>
                        </dt>

                        <dd>
                            <span>TA 점수</span>
                            <input type="text" numberOnly>
                            <em>이상</em>
                            <input type="text" numberOnly>
                            <em>이하</em>
                        </dd>
                    </dl>
                </div>

                <div class="fr">
                    <dl class="set_condition">
                        <dt>
                            <span>TA 부분&sol;미탐지 구간</span>
                            <div class="iptBox">
                                <input type="text" numberOnly>
                                <em>건</em>
                            </div>
                        </dt>

                        <dd>
                            <div class="sltArea slt_before fl">
                                <div id="ta"></div>
                            </div>

                            <div class="btnBox">
                                <a href="#none" class="btn_move_right">
                                    <span>선택완료이동</span>
                                </a>
                                <a href="#none" class="btn_move_left">
                                    <span>선택가능이동</span>
                                </a>
                            </div>

                            <div class="sltArea slt_after fr">
                                
                            </div>
                        </dd>
                    </dl>

                    <dl class="set_condition">
                        <dt>
                            <span>상품명</span>
                            <div class="iptBox">
                                <input type="text" numberOnly>
                                <em>건</em>
                            </div>
                        </dt>

                        <dd>
                            <div class="sltArea">
                                
                            </div>
                        </dd>
                    </dl>
                </div>
                
                <div class="btnBox">
                    <a href="#lyr_qaTarget_save" class="btn_save btn_lyr_open">저장</a>
                </div>
            </div>
            <!-- //.target_setArea -->
        </div>
        <!-- //#contents -->
    </div>
    <!-- //#container -->
</div>
<!-- //#wrap -->

<!-- layer popup -->
<!-- QA 대상 지정상태 저장 -->
<div id="lyr_qaTarget_save" class="lyrBox">
    <div class="lyr_hd">
        <span class="title">QA 대상 지정상태 저장</span>
        <a href="#none" class="btn_lyr_close">닫기</a>
     </div>
    <div class="lyr_ct">
            <p>저장 내용의 반영은 기존결과에 영향을 끼치지 않으며,<br>
            이후 &lbrack;대상 지정&rbrack; 자동화 처리 시 반영됩니다.</p>
    </div>
    <div class="lyr_ft">
        <div class="btnBox">
            <a href="#none" class="btn_lyr_save">확인</a>
            <a href="#none" class="btn_lyr_close">취소</a>
        </div>
    </div>
</div>
<!-- //QA 대상 지정상태 저장 -->

<!-- script -->
<script type="text/javascript">
$(document).ready(function(){
    // 공통 레이어 팝업
	$('.btn_lyr_open').on('click',function(){
        var popHref = $(this).attr('href');

        // popup open
        $('body').addClass('lyr_bg_dim');
        $(popHref).css({'display': 'block'});

        // popup close
        $('.btn_lyr_close, .lyr_bg_dimmed').on('click',function(){
            $('body').removeClass('lyr_bg_dim');
            $('.lyrBox').css({'display': 'none'});
        });
    });

    // 공통 저장완료 레이어 팝업
    $('.btn_lyr_save').on('click',function(){
        var thisLayer = $(this).parents('.lyrBox').attr('id');
        var thisLayerHref = $('#' + thisLayer);
        $(thisLayerHref).css({'display': 'none'});

        $('body').append(' \
            <div class="lyrBox lyr_notify">\
                <div class="lyr_ct"> \
                    <p class="massage">저장 되었습니다.</p> \
                </div> \
            </div> \
        ');
        $('.lyr_notify').show();

        setTimeout(function(){
            $('.lyr_notify').addClass('lyr_hide').delay(300).queue(function(){$(this).remove();});
            $('body').removeClass('lyr_bg_dim');
        }, 600);
    });

    // input:text[numberOnly] 숫자만 입력가능
    $('input:text[numberOnly]').keypress(function(event) {
        if(event.which < 48 || event.which > 57){
            event.preventDefault();
        }
    });

    // QA 대상 지정 총 건수 자동 합계
    var caseSum = 0;
    $('.target_setArea .set_condition dt .iptBox input').each(function(){
        caseSum += Number($(this).val());
        $('.qa_total_case').text(caseSum);
    });
    
    // tree view 메뉴
      var rootNode = [{
        "id": "1",
        "title": "Node 0",
        value: 1,
        "children": [
          {
            "id": "11",
            "title": "Node 11",
            value: 11,
            "children": [
              {
                "id": "111",
                "title": "Node 111",
                value: 111,
                "children": []
              },
              {
                "id": "112",
                "title": "Node 112",
                value: 112,
                "children": []
              }
            ]
          },
          {
            "id": "12",
            "title": "Node 12",
            value: 12,
            "children": [
            {
                "id": "121",
                "title": "Node 121",
                value: 121,
                "children": []
              }
            ]
          },
          {
            "id": "13",
            "title": "Node 13",
            value: 13,
            "children": []
          }
        ]
      }]

    $('#treeSelector').treeSelector(rootNode, [11, 12], function (e, values) {
        console.info('onChange', e, values);
        }, { 
        checkWithParent: true, 
        titleWithParent: true,
        notViewClickParentTitle: true
    });
      
      $('.treeSelector-container > div').addClass('sltArea');
});
</script>
</body>
</html>
