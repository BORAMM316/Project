<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

<!-- css -->
<link rel="stylesheet" href="resources/css/common.css">
<link rel="stylesheet" href="resources/css/popup.css">

<!-- js -->
<script src="resources/js/jquery-3.3.1.min.js"></script>
<script src="resources/js/jquery-migrate-3.3.0.min.js"></script>
<!-- player -->
<script src="resources/js/player.js"></script>

<title>CS STT 전수 ver2 || 푸본현대생명</title>
</head>
<body>
<!-- #wrap -->
<div id="wrap">
    <!-- #container -->
    <div id="container">
        <!-- #contents -->
        <div class="popup_wrap small">
            <h1>CS &hyphen; STT 전수</h1>

            <!-- .customInfo -->
            <div class="customInfo">
                <table class="tbl_line_view" summary="상담일시, 상담고객, 고객번호, 상담사, 사번으로 구성">
                    <caption class="hide">검색조건</caption>
                    <colgroup>
                        <col width="100"><col>
                    </colgroup>

                    <tbody>
                        <tr>
                            <th>상담일시</th>
                            <td>
                                <div class="custom_info_box consult_time">
                                    <span class="start_time">2020-08-03 09:10</span>
                                </div>
                                <span>&hyphen;</span>
                                <div class="custom_info_box consult_time">
                                    <span class="end_time">2020-08-03 09:10</span>
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <th>상담고객</th>
                            <td>
                                <div class="custom_info_box">
                                    <span class="name">홍길동</span>
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <th>고객번호</th>
                            <td>
                                <div class="custom_info_box">
                                    <span class="custom_num">21155</span>
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <th>상담사</th>
                            <td>
                                <div class="custom_info_box">
                                    <span class="consultant">김영희</span>
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <th>사번</th>
                            <td>
                                <div class="custom_info_box">
                                    <span class="epy_num">20203</span>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <!-- //.customInfo -->

            <!-- .consultBox -->
            <div class="consultBox">
                <!-- [D] tbody의 대화내용 셀 더블클릭 시 해당 내용 재생되며 재생 중인 음성과 텍스트의 싱크 맞춰야 함 / 재생 중인 텍스트(.dataTable tbody tr)에는 addclass('currentPlay')해주면 1~4번째 셀 텍스트 볼드처리 됨 -->
                <!--player-->
                <div class="player">
                   <audio preload="auto" controls>
                       <source src="resources/audio/aekukka.mp3">
                   </audio>

                   <!-- [D] 배속모드는 현재 지원안됨 -->
                   <div class="sltBox pyr_speed">
                       <select class="select">
                           <option value="">1.1X</option>
                           <option value="">1.2X</option>
                           <option value="">1.5X</option>
                           <option value="">2X</option>
                           <option value="">3X</option>
                       </select>
                   </div>
                </div>
                <!-- //.player -->

                <!-- .term_srch_box -->
                <div class="term_srch_box">
                    <div class="srchBox">
                        <input type="search" class="srchText" placeholder="검색어 입력">
                        <!-- [D] .txtIndex의 기본상태는 display:none이고, 검색버튼 또는 엔터 키 눌렀을 때 addclass('on')해주어 display:block 상태로 바꿔주어야함 -->
                        <!-- [D] 검색어에 일치하는 텍스트의 현재 인덱스는 .currentIndex에 넣어주고, 총 인덱스는 .totalIndex에 넣어주어야 함 -->
                        <span class="txtIndex">
                            <em class="currentIndex">0</em>&nbsp;&sol;&nbsp;<em class="totalIndex">0</em>
                        </span>
                        <a href="#none" class="btn_srch">
                            <span>검색버튼</span>
                        </a>
                    </div>

                    <!-- [D] 검색어 이동버튼(.btnBox a.btn_top / .btnBox a.btn_top)에 따라 현재 인덱스(.currentIndex) 숫자는 변화되어야 함 -->
                    <div class="btnBox btn_index_move">
                        <a href="#none" class="btn_top">
                            <img src="resources/images/arw_top_gr.png" alt="위로이동 화살표">
                        </a>
                        <a href="#none" class="btn_btm">
                            <img src="resources/images/arw_bottom_gr.png" alt="아래로이동 화살표">
                        </a>
                    </div>
                </div>
                <!-- //.term_srch_box -->

                <!-- .conversationBox -->
                <div class="conversationBox">
                    <ul>
                        <!-- [D] 대화내용 더블클릭 시 해당 내용 재생되며 재생 중인 음성과 텍스트의 싱크 맞춰야 함 / 재생 중인 텍스트(.conversationBox li)에는 addclass('currentPlay')해주면 1~4번째 셀 텍스트 볼드처리 됨 -->
                        <li class="fl custom currentPlay">
                            <em>02:30</em>
                            제가 지금 확인중인데 지난 월요일에 제출하셨다는 말씀이시죠?
                        </li>
                        <li class="fr counselor">
                            <em>02:30</em>
                            네 맞아요.
                        </li>
                        <!-- [D] 검색어 조회 시 일치내용 span.srch_term 로 감싸주어 볼드처리 해야함 -->
                        <!-- [D] 검색어 조회 후 이동버튼으로 포커스 이동 시 해당 검색어에 addclass('focus')해주면 백그라운드 하이라이트 처리됨 -->
                        <li class="fl custom">
                            <em>02:30</em>
                            제가 지금 확인중인데 지난 <span class="srch_term focus">월요일</span>에 제출하셨다는 말씀이시죠?
                        </li>
                        <li class="fl custom">
                            <em>02:30</em>
                            제가 지금 확인중인데 지난 월요일에 제출하셨다는 말씀이시죠?
                        </li>
                        <li class="fr counselor">
                            <em>02:30</em>
                            네 맞아요.
                        </li>
                        <li class="fl custom">
                            <em>02:30</em>
                            제가 지금 확인중인데 지난 월요일에 제출하셨다는 말씀이시죠?
                        </li>
                        <li class="fr counselor">
                            <em>02:30</em>
                            네 맞아요.
                        </li>
                        <li class="fl custom">
                            <em>02:30</em>
                            제가 지금 확인중인데 지난 월요일에 제출하셨다는 말씀이시죠?
                        </li>
                        <li class="fr counselor">
                            <em>02:30</em>
                            네 맞아요.
                        </li>
                        <li class="fl custom">
                            <em>02:30</em>
                            제가 지금 확인중인데 지난 월요일에 제출하셨다는 말씀이시죠?
                        </li>
                        <li class="fr counselor">
                            <em>02:30</em>
                            네 맞아요.
                        </li>
                        <li class="fl custom">
                            <em>02:30</em>
                            제가 지금 확인중인데 지난 월요일에 제출하셨다는 말씀이시죠?
                        </li>
                        <li class="fr counselor">
                            <em>02:30</em>
                            네 맞아요.
                        </li>
                        <li class="fl custom">
                            <em>02:30</em>
                            제가 지금 확인중인데 지난 월요일에 제출하셨다는 말씀이시죠?
                        </li>
                        <li class="fr counselor">
                            <em>02:30</em>
                            네 맞아요.
                        </li>
                        <li class="fl custom">
                            <em>02:30</em>
                            제가 지금 확인중인데 지난 월요일에 제출하셨다는 말씀이시죠?
                        </li>
                        <li class="fr counselor">
                            <em>02:30</em>
                            네 맞아요.
                        </li>
                        <li class="fl custom">
                            <em>02:30</em>
                            제가 지금 확인중인데 지난 월요일에 제출하셨다는 말씀이시죠?
                        </li>
                        <li class="fr counselor">
                            <em>02:30</em>
                            네 맞아요.
                        </li>
                    </ul>
                </div>
                <!-- //.conversationBox -->
            </div>
            <!-- //.consultBox -->
        </div>
        <!-- //#contents -->
    </div>
    <!-- //#container -->
</div>
<!-- //#wrap -->

<!-- script -->
<script type="text/javascript">
$(document).ready(function(){
    //오디오 플레이어
    $('audio').audioPlayer();
    $('.btn_player_play').on('click',function(){
        $(this).toggleClass('pause');
    });

    // STT 결과에서 텍스트 검색하기
    function tableTextSearch(){
        var inputText = $('.srchText').val();
        var srchCell = $('.dataTable td:contains('+inputText+')');
        var srchText = $('.dataTable td:contains('+inputText+')').text();

        $('.term_srch_box').addClass('on');

        $('.totalIndex').text(srchCell.length);

        if(srchText.indexOf(inputText) != -1) {
            console.log(srchText, '검색어가 포함되어 있다')
        }
        else {
            console.log('검색어가 포함되어있지 않다')
        }
    }
    // 검색어 입력 후 엔터키 눌렀을 시
    $('.srchText').keydown(function(e){
        if (e.which == 13){
           tableTextSearch();
        }
    });
    // 검색어 입력 후 검색버튼 클릭 시
    $('.btn_srch').on('click', function(){
        tableTextSearch();
    });
    // 검색어 없는경우
    $('.srchText').keydown(function(e){
        if (e.keyCode === 8 && $('.srchText').val() == ''){
           $('.term_srch_box').removeClass('on');
        }
    });
});
</script>
</body>
</html>
